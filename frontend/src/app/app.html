<div class="container">
  <!-- Navbar Fixed -->
  <nav class="navbar">
    <div class="navbar-content">
      <img src="icone-classifieur.png" alt="Logo" class="navbar-logo">
      <span class="navbar-title">Classifier Vos Articles Avec Pr√©cision</span>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Input Section -->
    <section class="input-section">
      <label for="textInput" class="input-label">üìù Entrez votre texte √† analyser</label>
      <textarea id="textInput" [(ngModel)]="inputText"
        placeholder="Collez un article, un email, ou n'importe quel texte en anglais..." rows="6"
        class="text-input"></textarea>

      <!-- File Upload -->
      <div class="file-upload">
        <label for="fileInput" class="file-label">
          üìÅ Ou importer (.txt, .md, .pdf, .docx)
        </label>
        <input type="file" id="fileInput" accept=".txt,.md,.pdf,.docx" (change)="onFileSelect($event)"
          class="file-input">
        <span *ngIf="fileName" class="file-name">{{ fileName }}</span>
      </div>

      <div class="button-group">
        <button (click)="classify()" [disabled]="isLoading || !inputText.trim()" class="btn btn-primary">
          <span *ngIf="!isLoading">‚Üí Analyser</span>
          <span *ngIf="isLoading">‚è≥ Analyse...</span>
        </button>

        <button (click)="clearForm()" class="btn btn-secondary" [disabled]="!inputText && !prediction">
          ‚úï Effacer
        </button>
      </div>
    </section>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      ‚ö†Ô∏è {{ error }}
    </div>

    <!-- Result Section -->

    <section *ngIf="prediction" class="result-section">
      <h2>R√©sultat de l'analyse</h2>

      <div class="result-card">
        <div class="result-main">
          <!-- Utiliser la cat√©gorie avec le plus haut score si disponible -->
          <ng-container
            *ngIf="prediction.confidence_scores && prediction.confidence_scores.length > 0; else defaultResult">
            <span class="category-icon">{{ categoryIcons[prediction.confidence_scores[0].name] || 'üìÑ' }}</span>
            <span class="category-name">{{ prediction.confidence_scores[0].name }}</span>
          </ng-container>

          <ng-template #defaultResult>
            <span class="category-icon">{{ getCategoryIcon(prediction.prediction_class_id) }}</span>
            <span class="category-name">{{ prediction.category_name || getClassName(prediction.prediction_class_id)
              }}</span>
          </ng-template>
        </div>

        <div class="confidence-bars" *ngIf="prediction.confidence_scores">
          <div class="confidence-item" *ngFor="let score of prediction.confidence_scores.slice(0, 3)">
            <div class="confidence-label">
              <span>{{ score.name }}</span>
              <span [style.color]="getConfidenceColor(score.value)">{{ (score.value * 100).toFixed(1) }}%</span>
            </div>
            <div class="progress-bg">
              <div class="progress-fill" [style.width.%]="score.value * 100"
                [style.background]="getConfidenceColor(score.value)">
              </div>
            </div>
          </div>
        </div>

        <div class="result-status">
          ‚úì Classification r√©ussie
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>Akram BENHAMMOU - Oussama KHOUYA - Copyright ¬© 2025</p>
  </footer>
</div>